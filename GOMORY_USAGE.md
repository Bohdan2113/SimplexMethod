# Метод Гомори для розв'язування задач цілочислового лінійного програмування

## Опис реалізації

Цей проект тепер включає повну реалізацію методу Гомори (Другий алгоритм) для розв'язування задач змішаного цілочислового лінійного програмування.

## Архітектура рішення

### 1. Типи даних (src/types/data.ts)

- `GomoryData` - розширює `LPData` додавши індекси цілочислових змінних
- `GomoryResult` - результат виконання алгоритму Гомори
- `GomoryCut` - відтинання Гомори (додаткове обмеження)

### 2. Основний алгоритм (src/services/GomoryMethod.ts)

**Ключові функції:**

- `solveByGomoryMethod()` - головна функція, яка викликається з UI
- `solveGomoryIterative()` - основний ітераційний алгоритм
- `generateGomoryCut()` - генерація відтинань Гомори за Другим алгоритмом
- `findMostFractionalIntegerVariable()` - пошук найбільш дробової цілочислової змінної

### 3. Інтеграція з UI

- Додано опцію "Gomory Method (Integer Programming)" у select методів
- Реалізовано покрокове відображення з коментарями
- Показуються всі проміжні таблиці та відтинання

## Алгоритм методу Гомори

### Крок 1: Релаксація

Розв'язується звичайна лінійна задача (без умови цілочисловості) симплекс-методом.

### Крок 2: Перевірка цілочисловості

Перевіряються всі змінні, які повинні бути цілими. Якщо всі цілі - кінець.

### Крок 3: Генерація відтинання

Для найбільш дробової цілочислової змінної генерується відтинання за формулами:

**Для цілочислових змінних:**

- Якщо {aᵢⱼ} ≤ βᵢ: γᵢⱼ = {aᵢⱼ}
- Якщо {aᵢⱼ} > βᵢ: γᵢⱼ = (βᵢ/(1-βᵢ)) × (1-{aᵢⱼ})

**Для нецілочислових змінних:**

- Якщо aᵢⱼ ≥ 0: γᵢⱼ = aᵢⱼ
- Якщо aᵢⱼ < 0: γᵢⱼ = (βᵢ/(1-βᵢ)) × |aᵢⱼ|

Де βᵢ = {bᵢ} - дробова частина вільного члена.

### Крок 4: Додавання обмеження

Відтинання додається як нове обмеження: -Σγᵢⱼxⱼ + sₖ = -βᵢ

### Крок 5: Двоїстий симплекс-метод

Розв'язується розширена задача двоїстим симплекс-методом.

## Як користуватися

### 1. Завантаження прикладу

Використовуйте файл `GomoryExample.json`:

```json
{
  "resursCount": 2,
  "productsCount": 2,
  "resources": [
    {
      "requirements": [1, 1],
      "available": 3.5,
      "sign": "<="
    },
    {
      "requirements": [2, 1],
      "available": 4,
      "sign": "<="
    }
  ],
  "prices": [2, 1]
}
```

### 2. Вибір методу

У випадаючому списку "Method" оберіть "Gomory Method (Integer Programming)"

### 3. Розв'язання

Натисніть кнопку "Solve" - система автоматично:

- Припустить, що всі основні змінні (x₁, x₂, ...) повинні бути цілими
- Покаже всі проміжні кроки з коментарями
- Відобразить відтинання Гомори та їх математичні формули
- Покаже фінальний результат

## Особливості реалізації

### Обробка помилок

- Перевірка наявності розв'язку лінійної релаксації
- Контроль максимальної кількості ітерацій (50)
- Обробка випадків, коли цілочисловий розв'язок не існує

### Відображення результатів

- Кольорове кодування результатів (успіх/помилка/попередження)
- Детальна інформація про кожну ітерацію
- Математичні формули відтинань
- Підсумковий аналіз

### Технічні деталі

- Точність обчислень: 1e-9 (EPSILON)
- Максимум ітерацій: 50
- Підтримка змішаних задач (частково цілочислових)
- Інтеграція з існуючими симплекс-методами

### Виправлені критичні помилки

**Проблема 1: Неправильний rowIndex**

- ❌ Раніше: індекс в масиві solution передавався як індекс рядка таблиці
- ✅ Тепер: використовується правильний індекс рядка з SimplexTableData

**Проблема 2: Перевірка небазисних змінних**

- ❌ Раніше: перевірялися всі змінні (включно з небазисними зі значенням 0)
- ✅ Тепер: перевіряються тільки базисні змінні

**Проблема 3: Ділення на нуль**

- ❌ Раніше: могло виникати ділення на нуль при oneMinusBeta ≈ 0
- ✅ Тепер: додана перевірка та обробка помилки

**Проблема 4: Неточна перевірка цілочисловості**

- ❌ Раніше: `fractionalPart > EPSILON` (могло вважати 0.999999 дробовим)
- ✅ Тепер: `fractionalPart > EPSILON && fractionalPart < (1 - EPSILON)`

## Тестування

### Тестовий приклад 1 (`Gomory_Test.json`)

- **Задача**: max(2x₁ + x₂) при обмеженнях x₁ + x₂ ≤ 3.25, 3x₁ + x₂ ≤ 4
- **Лінійна релаксація**: x₁ = 0.75, x₂ = 2.5, Q = 4
- **Цілочислові змінні**: x₁, x₂
- **Очікуваний результат**: x₁ = 1, x₂ = 2, Q\* = 4

### Тестовий приклад 2 (`GomoryExample.json`)

- **Задача**: max(2x₁ + x₂) при обмеженнях x₁ + x₂ ≤ 3.5, 2x₁ + x₂ ≤ 4
- **Цілочислові змінні**: x₁, x₂
- **Очікуваний результат**: x₁ = 1, x₂ = 2, Q\* = 4

## Структура файлів

```
src/
├── types/
│   └── data.ts                 # Типи даних для методу Гомори
├── services/
│   ├── GomoryMethod.ts         # Основна реалізація методу
│   └── index.ts                # Інтеграція з UI
├── data/
│   └── GomoryExample.json      # Тестовий приклад
└── styles.css                  # Стилі для відображення
```

Всі файли інтегровані з існуючою архітектурою проекту та використовують ті ж самі конвенції кодування.
